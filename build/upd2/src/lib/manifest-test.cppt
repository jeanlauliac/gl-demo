#include "manifest.h"
#include "string_char_reader.h"

using namespace upd;

typedef json::lexer<string_char_reader> string_lexer;

@case "parses empty manifest" {
  string_char_reader reader("{}");
  string_lexer lx(reader);
  auto result = manifest::parse(lx);
  manifest::manifest expected;
  @expect(result == expected);
}

@case "parses complex manifest" {
  string_char_reader reader(R"JSON({
    "source_patterns": [
      4
    ],
}
)JSON");
  string_lexer lx(reader);
  auto result = manifest::parse(lx);
  manifest::manifest expected;
  @expect(result == expected);
}
