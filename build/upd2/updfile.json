{
  "command_line_templates": [
    {
      "binary_path": "tools/compile_test.js",
      "arguments": [
        {"variables": ["input_files", "output_file", "dependency_file"]}
      ]
    },
    {
      "binary_path": "clang++",
      "arguments": [
        {"literals": ["-c", "-o"], "variables": ["output_file"]},
        {
          "literals": ["-std=c++14", "-Wall", "-fcolor-diagnostics", "-MMD", "-MF"],
          "variables": ["dependency_file"]
        },
        {"literals": ["-I", "/usr/local/include"], "variables": ["input_files"]}
      ]
    },
    {
      "binary_path": "clang++",
      "arguments": [
        {"literals": ["-c", "-o"], "variables": ["output_file"]},
        {
          "literals": ["-x", "c", "-Wall", "-fcolor-diagnostics", "-MMD", "-MF"],
          "variables": ["dependency_file"]
        },
        {"literals": ["-I", "/usr/local/include"], "variables": ["input_files"]}
      ]
    },
    {
      "binary_path": "tools/index_tests.js",
      "arguments": [
        {"variables": ["output_file", "dependency_file", "input_files"]}
      ]
    },
    {
      "binary_path": "clang++",
      "arguments": [
        {"literals": ["-o"], "variables": ["output_file"]},
        {
          "literals": ["-Wall", "-fcolor-diagnostics", "-std=c++14", "-L", "/usr/local/lib"],
          "variables": ["input_files"]
        }
      ]
    },
    {
      "binary_path": "tools/gen_package_info.js",
      "arguments": [
        {"variables": ["output_file", "dependency_file", "input_files"]}
      ]
    }
  ],
  "source_patterns": [
    "(src/lib/**/*).cppt",
    "(src/lib/**/*).cpp",
    "(src/lib/**/*).c",
    "(src/main).cpp",
    "(tools/lib/testing).cpp",
    "package.json"
  ],
  "rules": [
    {
      "command_line_ix": 0,
      "inputs": [{"source_ix": 0}],
      "output": "dist/($1).cpp"
    },
    {
      "command_line_ix": 1,
      "inputs": [{"source_ix": 1}],
      "output": "dist/($1).o"
    },
    {
      "command_line_ix": 2,
      "inputs": [{"source_ix": 2}],
      "output": "dist/($1).o"
    },
    {
      "command_line_ix": 3,
      "inputs": [{"source_ix": 0}],
      "output": "dist/(tests).cpp"
    },
    {
      "command_line_ix": 1,
      "inputs": [{"source_ix": 3}],
      "output": "dist/($1).o"
    },
    {
      "command_line_ix": 1,
      "inputs": [{"source_ix": 4}],
      "output": "dist/($1).o"
    },
    {
      "command_line_ix": 4,
      "inputs": [
        {"rule_ix": 1},
        {"rule_ix": 2},
        {"rule_ix": 4}
      ],
      "output": "dist/upd"
    },
    {
      "command_line_ix": 1,
      "inputs": [
        {"rule_ix": 0},
        {"rule_ix": 3}
      ],
      "output": "dist/($1).o"
    },
    {
      "command_line_ix": 4,
      "inputs": [
        {"rule_ix": 1},
        {"rule_ix": 2},
        {"rule_ix": 5},
        {"rule_ix": 7}
      ],
      "output": "dist/unit_tests"
    },
    {
      "command_line_ix": 5,
      "inputs": [{"source_ix": 5}],
      "output": "dist/package.cpp"
    }
  ]
}
